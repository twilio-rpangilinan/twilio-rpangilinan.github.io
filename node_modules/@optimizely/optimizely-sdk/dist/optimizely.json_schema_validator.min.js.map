{"version":3,"file":"optimizely.json_schema_validator.min.js","sources":["../lib/utils/enums/index.ts","../lib/core/project_config/project_config_schema.ts","../lib/utils/json_schema_validator/index.ts"],"sourcesContent":["/****************************************************************************\n * Copyright 2016-2021, Optimizely, Inc. and contributors                   *\n *                                                                          *\n * Licensed under the Apache License, Version 2.0 (the \"License\");          *\n * you may not use this file except in compliance with the License.         *\n * You may obtain a copy of the License at                                  *\n *                                                                          *\n *    http://www.apache.org/licenses/LICENSE-2.0                            *\n *                                                                          *\n * Unless required by applicable law or agreed to in writing, software      *\n * distributed under the License is distributed on an \"AS IS\" BASIS,        *\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. *\n * See the License for the specific language governing permissions and      *\n * limitations under the License.                                           *\n ***************************************************************************/\n\nimport { NOTIFICATION_TYPES as notificationTypesEnum } from '@optimizely/js-sdk-utils';\n\n/**\n * Contains global enums used throughout the library\n */\nexport const LOG_LEVEL = {\n  NOTSET: 0,\n  DEBUG: 1,\n  INFO: 2,\n  WARNING: 3,\n  ERROR: 4,\n};\n\nexport const ERROR_MESSAGES = {\n  CONDITION_EVALUATOR_ERROR: '%s: Error evaluating audience condition of type %s: %s',\n  DATAFILE_AND_SDK_KEY_MISSING: '%s: You must provide at least one of sdkKey or datafile. Cannot start Optimizely',\n  EXPERIMENT_KEY_NOT_IN_DATAFILE: '%s: Experiment key %s is not in datafile.',\n  FEATURE_NOT_IN_DATAFILE: '%s: Feature key %s is not in datafile.',\n  IMPROPERLY_FORMATTED_EXPERIMENT: '%s: Experiment key %s is improperly formatted.',\n  INVALID_ATTRIBUTES: '%s: Provided attributes are in an invalid format.',\n  INVALID_BUCKETING_ID: '%s: Unable to generate hash for bucketing ID %s: %s',\n  INVALID_DATAFILE: '%s: Datafile is invalid - property %s: %s',\n  INVALID_DATAFILE_MALFORMED: '%s: Datafile is invalid because it is malformed.',\n  INVALID_CONFIG: '%s: Provided Optimizely config is in an invalid format.',\n  INVALID_JSON: '%s: JSON object is not valid.',\n  INVALID_ERROR_HANDLER: '%s: Provided \"errorHandler\" is in an invalid format.',\n  INVALID_EVENT_DISPATCHER: '%s: Provided \"eventDispatcher\" is in an invalid format.',\n  INVALID_EVENT_TAGS: '%s: Provided event tags are in an invalid format.',\n  INVALID_EXPERIMENT_KEY: '%s: Experiment key %s is not in datafile. It is either invalid, paused, or archived.',\n  INVALID_EXPERIMENT_ID: '%s: Experiment ID %s is not in datafile.',\n  INVALID_GROUP_ID: '%s: Group ID %s is not in datafile.',\n  INVALID_LOGGER: '%s: Provided \"logger\" is in an invalid format.',\n  INVALID_ROLLOUT_ID: '%s: Invalid rollout ID %s attached to feature %s',\n  INVALID_USER_ID: '%s: Provided user ID is in an invalid format.',\n  INVALID_USER_PROFILE_SERVICE: '%s: Provided user profile service instance is in an invalid format: %s.',\n  NO_DATAFILE_SPECIFIED: '%s: No datafile specified. Cannot start optimizely.',\n  NO_JSON_PROVIDED: '%s: No JSON object to validate against schema.',\n  NO_VARIATION_FOR_EXPERIMENT_KEY: '%s: No variation key %s defined in datafile for experiment %s.',\n  UNDEFINED_ATTRIBUTE: '%s: Provided attribute: %s has an undefined value.',\n  UNRECOGNIZED_ATTRIBUTE: '%s: Unrecognized attribute %s provided. Pruning before sending event to Optimizely.',\n  UNABLE_TO_CAST_VALUE: '%s: Unable to cast value %s to type %s, returning null.',\n  USER_NOT_IN_FORCED_VARIATION: '%s: User %s is not in the forced variation map. Cannot remove their forced variation.',\n  USER_PROFILE_LOOKUP_ERROR: '%s: Error while looking up user profile for user ID \"%s\": %s.',\n  USER_PROFILE_SAVE_ERROR: '%s: Error while saving user profile for user ID \"%s\": %s.',\n  VARIABLE_KEY_NOT_IN_DATAFILE: '%s: Variable with key \"%s\" associated with feature with key \"%s\" is not in datafile.',\n  VARIATION_ID_NOT_IN_DATAFILE: '%s: No variation ID %s defined in datafile for experiment %s.',\n  VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT: '%s: Variation ID %s is not in the datafile.',\n  INVALID_INPUT_FORMAT: '%s: Provided %s is in an invalid format.',\n  INVALID_DATAFILE_VERSION: '%s: This version of the JavaScript SDK does not support the given datafile version: %s',\n  INVALID_VARIATION_KEY: '%s: Provided variation key is in an invalid format.',\n};\n\nexport const LOG_MESSAGES = {\n  ACTIVATE_USER: '%s: Activating user %s in experiment %s.',\n  DISPATCH_CONVERSION_EVENT: '%s: Dispatching conversion event to URL %s with params %s.',\n  DISPATCH_IMPRESSION_EVENT: '%s: Dispatching impression event to URL %s with params %s.',\n  DEPRECATED_EVENT_VALUE: '%s: Event value is deprecated in %s call.',\n  EVENT_KEY_NOT_FOUND: '%s: Event key %s is not in datafile.',\n  EXPERIMENT_NOT_RUNNING: '%s: Experiment %s is not running.',\n  FEATURE_ENABLED_FOR_USER: '%s: Feature %s is enabled for user %s.',\n  FEATURE_NOT_ENABLED_FOR_USER: '%s: Feature %s is not enabled for user %s.',\n  FEATURE_HAS_NO_EXPERIMENTS: '%s: Feature %s is not attached to any experiments.',\n  FAILED_TO_PARSE_VALUE: '%s: Failed to parse event value \"%s\" from event tags.',\n  FAILED_TO_PARSE_REVENUE: '%s: Failed to parse revenue value \"%s\" from event tags.',\n  FORCED_BUCKETING_FAILED: '%s: Variation key %s is not in datafile. Not activating user %s.',\n  INVALID_OBJECT: '%s: Optimizely object is not valid. Failing %s.',\n  INVALID_CLIENT_ENGINE: '%s: Invalid client engine passed: %s. Defaulting to node-sdk.',\n  INVALID_DEFAULT_DECIDE_OPTIONS: '%s: Provided default decide options is not an array.',\n  INVALID_DECIDE_OPTIONS: '%s: Provided decide options is not an array. Using default decide options.',\n  INVALID_VARIATION_ID: '%s: Bucketed into an invalid variation ID. Returning null.',\n  NOTIFICATION_LISTENER_EXCEPTION: '%s: Notification listener for (%s) threw exception: %s',\n  NO_ROLLOUT_EXISTS: '%s: There is no rollout of feature %s.',\n  NOT_ACTIVATING_USER: '%s: Not activating user %s for experiment %s.',\n  NOT_TRACKING_USER: '%s: Not tracking user %s.',\n  PARSED_REVENUE_VALUE: '%s: Parsed revenue value \"%s\" from event tags.',\n  PARSED_NUMERIC_VALUE: '%s: Parsed event value \"%s\" from event tags.',\n  RETURNING_STORED_VARIATION:\n    '%s: Returning previously activated variation \"%s\" of experiment \"%s\" for user \"%s\" from user profile.',\n  ROLLOUT_HAS_NO_EXPERIMENTS: '%s: Rollout of feature %s has no experiments',\n  SAVED_VARIATION: '%s: Saved variation \"%s\" of experiment \"%s\" for user \"%s\".',\n  SAVED_VARIATION_NOT_FOUND:\n    '%s: User %s was previously bucketed into variation with ID %s for experiment %s, but no matching variation was found.',\n  SHOULD_NOT_DISPATCH_ACTIVATE: '%s: Experiment %s is not in \"Running\" state. Not activating user.',\n  SKIPPING_JSON_VALIDATION: '%s: Skipping JSON schema validation.',\n  TRACK_EVENT: '%s: Tracking event %s for user %s.',\n  UNRECOGNIZED_DECIDE_OPTION: '%s: Unrecognized decide option %s provided.',\n  USER_ASSIGNED_TO_EXPERIMENT_BUCKET: '%s: Assigned bucket %s to user with bucketing ID %s.',\n  USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP: '%s: User %s is in experiment %s of group %s.',\n  USER_BUCKETED_INTO_TARGETING_RULE: '%s: User %s bucketed into targeting rule %s.',\n  USER_IN_FEATURE_EXPERIMENT: '%s: User %s is in variation %s of experiment %s on the feature %s.',\n  USER_IN_ROLLOUT: '%s: User %s is in rollout of feature %s.',\n  USER_BUCKETED_INTO_EVERYONE_TARGETING_RULE: '%s: User %s bucketed into everyone targeting rule.',\n  USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE:\n    '%s: User %s not bucketed into everyone targeting rule due to traffic allocation.',\n  USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP: '%s: User %s is not in experiment %s of group %s.',\n  USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP: '%s: User %s is not in any experiment of group %s.',\n  USER_NOT_BUCKETED_INTO_TARGETING_RULE:\n    '%s User %s not bucketed into targeting rule %s due to traffic allocation. Trying everyone rule.',\n  USER_NOT_IN_FEATURE_EXPERIMENT: '%s: User %s is not in any experiment on the feature %s.',\n  USER_NOT_IN_ROLLOUT: '%s: User %s is not in rollout of feature %s.',\n  USER_FORCED_IN_VARIATION: '%s: User %s is forced in variation %s.',\n  USER_MAPPED_TO_FORCED_VARIATION: '%s: Set variation %s for experiment %s and user %s in the forced variation map.',\n  USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE: '%s: User %s does not meet conditions for targeting rule %s.',\n  USER_MEETS_CONDITIONS_FOR_TARGETING_RULE: '%s: User %s meets conditions for targeting rule %s.',\n  USER_HAS_VARIATION: '%s: User %s is in variation %s of experiment %s.',\n  USER_HAS_FORCED_VARIATION: '%s: Variation %s is mapped to experiment %s and user %s in the forced variation map.',\n  USER_HAS_NO_VARIATION: '%s: User %s is in no variation of experiment %s.',\n  USER_HAS_NO_FORCED_VARIATION: '%s: User %s is not in the forced variation map.',\n  USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT: '%s: No experiment %s mapped to user %s in the forced variation map.',\n  USER_NOT_IN_ANY_EXPERIMENT: '%s: User %s is not in any experiment of group %s.',\n  USER_NOT_IN_EXPERIMENT: '%s: User %s does not meet conditions to be in experiment %s.',\n  USER_RECEIVED_DEFAULT_VARIABLE_VALUE:\n    '%s: User \"%s\" is not in any variation or rollout rule. Returning default value for variable \"%s\" of feature flag \"%s\".',\n  FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE:\n    '%s: Feature \"%s\" is not enabled for user %s. Returning the default variable value \"%s\".',\n  VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:\n    '%s: Variable \"%s\" is not used in variation \"%s\". Returning default value.',\n  USER_RECEIVED_VARIABLE_VALUE: '%s: Got variable value \"%s\" for variable \"%s\" of feature flag \"%s\"',\n  VALID_DATAFILE: '%s: Datafile is valid.',\n  VALID_USER_PROFILE_SERVICE: '%s: Valid user profile service provided.',\n  VARIATION_REMOVED_FOR_USER: '%s: Variation mapped to experiment %s has been removed for user %s.',\n  VARIABLE_REQUESTED_WITH_WRONG_TYPE:\n    '%s: Requested variable type \"%s\", but variable is of type \"%s\". Use correct API to retrieve value. Returning None.',\n  VALID_BUCKETING_ID: '%s: BucketingId is valid: \"%s\"',\n  BUCKETING_ID_NOT_STRING: '%s: BucketingID attribute is not a string. Defaulted to userId',\n  EVALUATING_AUDIENCE: '%s: Starting to evaluate audience \"%s\" with conditions: %s.',\n  EVALUATING_AUDIENCES_COMBINED: '%s: Evaluating audiences for %s \"%s\": %s.',\n  AUDIENCE_EVALUATION_RESULT: '%s: Audience \"%s\" evaluated to %s.',\n  AUDIENCE_EVALUATION_RESULT_COMBINED: '%s: Audiences for %s %s collectively evaluated to %s.',\n  MISSING_ATTRIBUTE_VALUE:\n    '%s: Audience condition %s evaluated to UNKNOWN because no value was passed for user attribute \"%s\".',\n  UNEXPECTED_CONDITION_VALUE:\n    '%s: Audience condition %s evaluated to UNKNOWN because the condition value is not supported.',\n  UNEXPECTED_TYPE:\n    '%s: Audience condition %s evaluated to UNKNOWN because a value of type \"%s\" was passed for user attribute \"%s\".',\n  UNEXPECTED_TYPE_NULL:\n    '%s: Audience condition %s evaluated to UNKNOWN because a null value was passed for user attribute \"%s\".',\n  UNKNOWN_CONDITION_TYPE:\n    '%s: Audience condition %s has an unknown condition type. You may need to upgrade to a newer release of the Optimizely SDK.',\n  UNKNOWN_MATCH_TYPE:\n    '%s: Audience condition %s uses an unknown match type. You may need to upgrade to a newer release of the Optimizely SDK.',\n  UPDATED_OPTIMIZELY_CONFIG: '%s: Updated Optimizely config to revision %s (project id %s)',\n  OUT_OF_BOUNDS:\n    '%s: Audience condition %s evaluated to UNKNOWN because the number value for user attribute \"%s\" is not in the range [-2^53, +2^53].',\n  UNABLE_TO_ATTACH_UNLOAD: '%s: unable to bind optimizely.close() to page unload event: \"%s\"',\n};\n\nexport const enum RESERVED_EVENT_KEYWORDS {\n  REVENUE = 'revenue',\n  VALUE = 'value',\n}\n\nexport const CONTROL_ATTRIBUTES = {\n  BOT_FILTERING: '$opt_bot_filtering',\n  BUCKETING_ID: '$opt_bucketing_id',\n  STICKY_BUCKETING_KEY: '$opt_experiment_bucket_map',\n  USER_AGENT: '$opt_user_agent',\n};\n\nexport const JAVASCRIPT_CLIENT_ENGINE = 'javascript-sdk';\nexport const NODE_CLIENT_ENGINE = 'node-sdk';\nexport const REACT_CLIENT_ENGINE = 'react-sdk';\nexport const REACT_NATIVE_CLIENT_ENGINE = 'react-native-sdk';\nexport const REACT_NATIVE_JS_CLIENT_ENGINE = 'react-native-js-sdk';\nexport const NODE_CLIENT_VERSION = '4.7.0';\n\nexport const VALID_CLIENT_ENGINES = [\n  NODE_CLIENT_ENGINE,\n  REACT_CLIENT_ENGINE,\n  JAVASCRIPT_CLIENT_ENGINE,\n  REACT_NATIVE_CLIENT_ENGINE,\n  REACT_NATIVE_JS_CLIENT_ENGINE,\n];\n\nexport const NOTIFICATION_TYPES = notificationTypesEnum;\n\nexport const DECISION_NOTIFICATION_TYPES = {\n  AB_TEST: 'ab-test',\n  FEATURE: 'feature',\n  FEATURE_TEST: 'feature-test',\n  FEATURE_VARIABLE: 'feature-variable',\n  ALL_FEATURE_VARIABLES: 'all-feature-variables',\n  FLAG: 'flag',\n};\n\n/*\n * Represents the source of a decision for feature management. When a feature\n * is accessed through isFeatureEnabled or getVariableValue APIs, the decision\n * source is used to decide whether to dispatch an impression event to\n * Optimizely.\n */\nexport const DECISION_SOURCES = {\n  FEATURE_TEST: 'feature-test',\n  ROLLOUT: 'rollout',\n  EXPERIMENT: 'experiment',\n};\n\nexport const AUDIENCE_EVALUATION_TYPES = {\n  RULE: 'rule',\n  EXPERIMENT: 'experiment',\n};\n\n/*\n * Possible types of variables attached to features\n */\nexport const FEATURE_VARIABLE_TYPES = {\n  BOOLEAN: 'boolean',\n  DOUBLE: 'double',\n  INTEGER: 'integer',\n  STRING: 'string',\n  JSON: 'json',\n};\n\n/*\n * Supported datafile versions\n */\nexport const DATAFILE_VERSIONS = {\n  V2: '2',\n  V3: '3',\n  V4: '4',\n};\n\n/*\n * Pre-Release and Build symbols\n */\nexport const enum VERSION_TYPE {\n  PRE_RELEASE_VERSION_DELIMITER = '-',\n  BUILD_VERSION_DELIMITER = '+'\n}\n\nexport const DECISION_MESSAGES = {\n  SDK_NOT_READY: 'Optimizely SDK not configured properly yet.',\n  FLAG_KEY_INVALID: 'No flag was found for key \"%s\".',\n  VARIABLE_VALUE_INVALID: 'Variable value for key \"%s\" is invalid or wrong type.',\n}\n","/**\n * Copyright 2016-2017, 2020, Optimizely\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/*eslint-disable */\n/**\n * Project Config JSON Schema file used to validate the project json datafile\n */\n import { JSONSchema4 } from 'json-schema';\n\n var schemaDefinition = {\n  $schema: 'http://json-schema.org/draft-04/schema#',\n  type: 'object',\n  properties: {\n    projectId: {\n      type: 'string',\n      required: true,\n    },\n    accountId: {\n      type: 'string',\n      required: true,\n    },\n    groups: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          id: {\n            type: 'string',\n            required: true,\n          },\n          policy: {\n            type: 'string',\n            required: true,\n          },\n          trafficAllocation: {\n            type: 'array',\n            items: {\n              type: 'object',\n              properties: {\n                entityId: {\n                  type: 'string',\n                  required: true,\n                },\n                endOfRange: {\n                  type: 'integer',\n                  required: true,\n                },\n              },\n            },\n            required: true,\n          },\n          experiments: {\n            type: 'array',\n            items: {\n              type: 'object',\n              properties: {\n                id: {\n                  type: 'string',\n                  required: true,\n                },\n                key: {\n                  type: 'string',\n                  required: true,\n                },\n                status: {\n                  type: 'string',\n                  required: true,\n                },\n                layerId: {\n                  type: 'string',\n                  required: true,\n                },\n                variations: {\n                  type: 'array',\n                  items: {\n                    type: 'object',\n                    properties: {\n                      id: {\n                        type: 'string',\n                        required: true,\n                      },\n                      key: {\n                        type: 'string',\n                        required: true,\n                      },\n                    },\n                  },\n                  required: true,\n                },\n                trafficAllocation: {\n                  type: 'array',\n                  items: {\n                    type: 'object',\n                    properties: {\n                      entityId: {\n                        type: 'string',\n                        required: true,\n                      },\n                      endOfRange: {\n                        type: 'integer',\n                        required: true,\n                      },\n                    },\n                  },\n                  required: true,\n                },\n                audienceIds: {\n                  type: 'array',\n                  items: {\n                    type: 'string',\n                  },\n                  required: true,\n                },\n                forcedVariations: {\n                  type: 'object',\n                  required: true,\n                },\n              },\n            },\n            required: true,\n          },\n        },\n      },\n      required: true,\n    },\n    experiments: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          id: {\n            type: 'string',\n            required: true,\n          },\n          key: {\n            type: 'string',\n            required: true,\n          },\n          status: {\n            type: 'string',\n            required: true,\n          },\n          layerId: {\n            type: 'string',\n            required: true,\n          },\n          variations: {\n            type: 'array',\n            items: {\n              type: 'object',\n              properties: {\n                id: {\n                  type: 'string',\n                  required: true,\n                },\n                key: {\n                  type: 'string',\n                  required: true,\n                },\n              },\n            },\n            required: true,\n          },\n          trafficAllocation: {\n            type: 'array',\n            items: {\n              type: 'object',\n              properties: {\n                entityId: {\n                  type: 'string',\n                  required: true,\n                },\n                endOfRange: {\n                  type: 'integer',\n                  required: true,\n                },\n              },\n            },\n            required: true,\n          },\n          audienceIds: {\n            type: 'array',\n            items: {\n              type: 'string',\n            },\n            required: true,\n          },\n          forcedVariations: {\n            type: 'object',\n            required: true,\n          },\n        },\n      },\n      required: true,\n    },\n    events: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          key: {\n            type: 'string',\n            required: true,\n          },\n          experimentIds: {\n            type: 'array',\n            items: {\n              type: 'string',\n              required: true,\n            },\n          },\n          id: {\n            type: 'string',\n            required: true,\n          },\n        },\n      },\n      required: true,\n    },\n    audiences: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          id: {\n            type: 'string',\n            required: true,\n          },\n          name: {\n            type: 'string',\n            required: true,\n          },\n          conditions: {\n            type: 'string',\n            required: true,\n          },\n        },\n      },\n      required: true,\n    },\n    attributes: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          id: {\n            type: 'string',\n            required: true,\n          },\n          key: {\n            type: 'string',\n            required: true,\n          },\n        },\n      },\n      required: true,\n    },\n    version: {\n      type: 'string',\n      required: true,\n    },\n    revision: {\n      type: 'string',\n      required: true,\n    },\n  },\n};\n\nconst schema = schemaDefinition as JSONSchema4\n\nexport default schema\n","/**\n * Copyright 2016-2017, 2020 Optimizely\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { sprintf } from '@optimizely/js-sdk-utils';\nimport { validate as jsonSchemaValidator } from 'json-schema';\n\nimport { ERROR_MESSAGES } from '../enums';\nimport schema from '../../core/project_config/project_config_schema';\n\nconst MODULE_NAME = 'JSON_SCHEMA_VALIDATOR';\n\n/**\n * Validate the given json object against the specified schema\n * @param  {unknown} jsonObject The object to validate against the schema\n * @return {boolean}            true if the given object is valid\n */\nexport function validate(jsonObject: unknown): boolean {\n  if (typeof jsonObject !== 'object' || jsonObject === null) {\n    throw new Error(sprintf(ERROR_MESSAGES.NO_JSON_PROVIDED, MODULE_NAME));\n  }\n\n  const result = jsonSchemaValidator(jsonObject, schema);\n  if (result.valid) {\n    return true;\n  } else {\n    if (Array.isArray(result.errors)) {\n      throw new Error(\n        sprintf(ERROR_MESSAGES.INVALID_DATAFILE, MODULE_NAME, result.errors[0].property, result.errors[0].message)\n      );\n    }\n    throw new Error(sprintf(ERROR_MESSAGES.INVALID_JSON, MODULE_NAME));\n  }\n}\n"],"names":["ERROR_MESSAGES","schema","$schema","type","properties","projectId","required","accountId","groups","items","id","policy","trafficAllocation","entityId","endOfRange","experiments","key","status","layerId","variations","audienceIds","forcedVariations","events","experimentIds","audiences","name","conditions","attributes","version","revision","jsonObject","Error","sprintf","result","jsonSchemaValidator","valid","Array","isArray","errors","property","message"],"mappings":"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"}